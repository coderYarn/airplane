{"version":3,"sources":["file:///C:/Users/coderYarn/Desktop/airplane/assets/script/bullet/Bullet.ts"],"names":["_decorator","Component","Collider","Constant","PoolManager","ccclass","property","Bullet","Direction","MIDDLE","onEnable","collider","getComponent","on","_onTriggerEnter","onDisable","off","update","deltaTime","pos","node","position","moveLength","_isEnemyBullet","z","_bulletSpeed","setPosition","x","y","instance","putNode","_direction","LEFT","RIGHT","show","speed","isEnemyBullet","direction","event"],"mappings":"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","sourcesContent":["\r\nimport { _decorator, Component, Node, Collider, ITriggerEvent } from 'cc';\r\nimport { Constant } from '../framework/Constant';\r\nimport { PoolManager } from '../framework/PoolManager';\r\nconst { ccclass, property } = _decorator;\r\n\r\n/**\r\n * Predefined variables\r\n * Name = Bullet\r\n * DateTime = Mon Mar 15 2023 11:00:15 GMT+0800 (China Standard Time)\r\n * Author = mywayday\r\n * FileBasename = Bullet.ts\r\n * FileBasenameNoExtension = Bullet\r\n * URL = db://assets/script/bullet/Bullet.ts\r\n * ManualUrl = https://docs.cocos.com/creator/3.3/manual/en/\r\n *\r\n */\r\n\r\n@ccclass('Bullet')\r\nexport class Bullet extends Component {\r\n    private _bulletSpeed = 0;\r\n    private _direction = Constant.Direction.MIDDLE;\r\n    private _isEnemyBullet = false;\r\n\r\n    onEnable () {\r\n        const collider = this.getComponent(Collider);\r\n        collider.on('onTriggerEnter', this._onTriggerEnter, this);\r\n    }\r\n\r\n    onDisable () {\r\n        const collider = this.getComponent(Collider);\r\n        collider.off('onTriggerEnter', this._onTriggerEnter, this);\r\n    }\r\n\r\n    update (deltaTime: number) {\r\n        const pos = this.node.position;\r\n        let moveLength = 0;\r\n        if (this._isEnemyBullet) {\r\n            moveLength = pos.z + this._bulletSpeed;\r\n            this.node.setPosition(pos.x, pos.y, moveLength);\r\n            if (moveLength > 50) {\r\n                // this.node.destroy();\r\n                PoolManager.instance().putNode(this.node);\r\n                // console.log('bullet destroy');\r\n            }\r\n        } else {\r\n            moveLength = pos.z - this._bulletSpeed;\r\n            if(this._direction === Constant.Direction.LEFT){\r\n                this.node.setPosition(pos.x - this._bulletSpeed * 0.2, pos.y, moveLength);\r\n            } else if(this._direction === Constant.Direction.RIGHT){\r\n                this.node.setPosition(pos.x + this._bulletSpeed * 0.2, pos.y, moveLength);\r\n            } else{\r\n                this.node.setPosition(pos.x, pos.y, moveLength);\r\n            }\r\n\r\n            if (moveLength < -50) {\r\n                // this.node.destroy();\r\n                PoolManager.instance().putNode(this.node);\r\n                // console.log('bullet destroy');\r\n            }\r\n        }\r\n    }\r\n\r\n    show(speed: number, isEnemyBullet: boolean, direction = Constant.Direction.MIDDLE){\r\n        this._bulletSpeed = speed;\r\n        this._isEnemyBullet = isEnemyBullet;\r\n        this._direction = direction;\r\n    }\r\n\r\n    private _onTriggerEnter(event: ITriggerEvent){\r\n        // console.log('trigger  bullet destroy');\r\n        // this.node.destroy();\r\n        PoolManager.instance().putNode(this.node);\r\n    }\r\n}\r\n\r\n/**\r\n * [1] Class member could be defined like this.\r\n * [2] Use `property` decorator if your want the member to be serializable.\r\n * [3] Your initialization goes here.\r\n * [4] Your update function goes here.\r\n *\r\n * Learn more about scripting: https://docs.cocos.com/creator/3.3/manual/en/scripting/\r\n * Learn more about CCClass: https://docs.cocos.com/creator/3.3/manual/en/scripting/ccclass.html\r\n * Learn more about life-cycle callbacks: https://docs.cocos.com/creator/3.3/manual/en/scripting/life-cycle-callbacks.html\r\n */\r\n"]}